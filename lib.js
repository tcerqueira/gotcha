(function(s,o){typeof exports=="object"&&typeof module<"u"?o(exports):typeof define=="function"&&define.amd?define(["exports"],o):(s=typeof globalThis<"u"?globalThis:s||self,o(s.GotchaWidgetLib={}))})(this,function(s){"use strict";function o(e){const n=e instanceof URLSearchParams?e:new URLSearchParams(e),a={k:n.get("k")??"",hl:n.get("hl")??navigator?.language,theme:n.get("theme")??"light",size:n.get("size")??"normal"},d=n.get("badge");d&&(a.badge=d);const r=n.get("sv");return r&&(a.sv=r),a}let u=null;const t=[];async function c(){t.length>0||(u=o(window.location.search),document.addEventListener("mousemove",e=>{t.push({ts:Date.now(),event:{kind:"mousemovement",x:e.offsetX,y:e.offsetY}})}),document.addEventListener("mouseup",e=>{t.push({ts:Date.now(),event:{kind:"mouseclick",mouse:"up"}})}),document.addEventListener("mousedown",e=>{t.push({ts:Date.now(),event:{kind:"mouseclick",mouse:"down"}})}),document.addEventListener("mouseenter",e=>{t.push({ts:Date.now(),event:{kind:"mouseenter",mouse:"in"}})}),document.addEventListener("mouseleave",e=>{t.push({ts:Date.now(),event:{kind:"mouseenter",mouse:"out"}})}),document.addEventListener("keyup",e=>{t.push({ts:Date.now(),event:{kind:"keypress",keyMove:"up",key:e.key}})}),document.addEventListener("keydown",e=>{t.push({ts:Date.now(),event:{kind:"keypress",keyMove:"down",key:e.key}})}))}const i="*";async function m(e,n=window.parent){const a={type:"response-callback",success:e,interactions:t};n.postMessage(a,u?.sv??i)}async function l(e=window.parent){const n={type:"error-callback"};e.postMessage(n,u?.sv??i)}s.onChallengeError=l,s.onChallengeResponse=m,s.setup=c,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})});
