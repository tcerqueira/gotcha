(function(s,o){typeof exports=="object"&&typeof module<"u"?o(exports):typeof define=="function"&&define.amd?define(["exports"],o):(s=typeof globalThis<"u"?globalThis:s||self,o(s.GotchaWidgetLib={}))})(this,function(s){"use strict";let o=null;function l(e){const t=e instanceof URLSearchParams?e:new URLSearchParams(e);o={k:t.get("k")??"",hl:t.get("hl")??navigator?.language,theme:t.get("theme")??"light",size:t.get("size")??"normal",badge:t.get("badge"),sv:t.get("sv"),logoUrl:t.get("logoUrl")}}function a(){return o}const u=[];function i(e){const t={mousemove:n=>{e.push({ts:Date.now(),event:{kind:"mousemovement",x:n.offsetX,y:n.offsetY}})},mouseup:n=>{e.push({ts:Date.now(),event:{kind:"mouseclick",mouse:"up"}})},mousedown:n=>{e.push({ts:Date.now(),event:{kind:"mouseclick",mouse:"down"}})},mouseenter:n=>{e.push({ts:Date.now(),event:{kind:"mouseenter",mouse:"in"}})},mouseleave:n=>{e.push({ts:Date.now(),event:{kind:"mouseenter",mouse:"out"}})},keyup:n=>{e.push({ts:Date.now(),event:{kind:"keypress",keyMove:"up",key:n.key}})},keydown:n=>{e.push({ts:Date.now(),event:{kind:"keypress",keyMove:"down",key:n.key}})}};return Object.entries(t).forEach(([n,r])=>{document.addEventListener(n,r)}),()=>{Object.entries(t).forEach(([n,r])=>{document.removeEventListener(n,r)})}}const c="*";async function m(){return a()!==null?()=>{}:(l(window.location.search),i(u))}async function p(e,t=window.parent){const n={type:"response-callback",success:e,interactions:u};t.postMessage(n,a()?.sv??c)}async function d(e=window.parent){const t={type:"error-callback"};e.postMessage(t,a()?.sv??c)}function g(){const e=a();if(!e)throw new Error("Params not yet extracted. Call `setup` before retrieving params");return e}s.getParams=g,s.onChallengeError=d,s.onChallengeResponse=p,s.setup=m,Object.defineProperty(s,Symbol.toStringTag,{value:"Module"})});
